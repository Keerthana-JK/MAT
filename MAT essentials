using System;
using System.Collections.Generic;

namespace MATProject.Entities
{
    public partial class MedicationSchedule
    {
        // Additional properties or methods can be added here
        public void InitializeScheduledTimes(DateTime startDate, DateTime endDate, string frequency)
        {
            // Create an instance of the schedule generator
            MedicationScheduleGenerator scheduleGenerator = new MedicationScheduleGenerator();
            List<DateTime> scheduledTimes = scheduleGenerator.GenerateScheduledTimes(startDate, endDate, frequency);
            
            foreach (var scheduledTime in scheduledTimes)
            {
                // Assuming you have a collection to hold the scheduled times
                // If you don't have this, consider creating a new collection in this class
                // or handle this logic outside of this partial class

                // Here, you might want to create new instances of the MedicationSchedule
                // or another related entity to store these scheduled times.
                MedicationSchedule newSchedule = new MedicationSchedule
                {
                    ScheduledTime = scheduledTime,
                    MedicationID = this.MedicationID, // Ensure this is set appropriately
                    Status = "Pending", // Default status
                    CreatedAt = DateTime.Now
                };

                // Here, you might add this newSchedule to a collection, 
                // or handle it as needed in your application logic.
            }
        }
    }
}
