private void Login()
{
    try
    {
        // Hash the password (if you're storing hashed passwords)
        string enteredPasswordHash = CurrentUser.PasswordHash; // Ideally hash it here
        
        // Check if any user matches the entered username and password hash
        var user = Users.FirstOrDefault(u => u.Username == CurrentUser.Username && u.PasswordHash == enteredPasswordHash);

        if (user != null)
        {
            MessageBox.Show("Login successful!", "Success", MessageBoxButton.OK, MessageBoxImage.Information);
            
            // Set the logged-in user
            CurrentUser = user;
            
            // Optionally, close the login window or navigate to the next page
            if (WindowClose != null)
            {
                WindowClose();
            }
        }
        else
        {
            MessageBox.Show("Invalid username or password.", "Login Failed", MessageBoxButton.OK, MessageBoxImage.Error);
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show($"An error occurred during login: {ex.Message}");
    }
}
