public class MedicationSchedulesRepo
{
    private MedicationScheduleGenerator _scheduleGenerator;

    public MedicationSchedulesRepo()
    {
        _scheduleGenerator = new MedicationScheduleGenerator();
    }

    public void CreateMedicationSchedules(Medication medication)
    {
        // Generate the scheduled times from the medication's startDate, endDate, and frequency
        List<DateTime> scheduledTimes = _scheduleGenerator.GenerateScheduledTimes(medication.StartDate, medication.EndDate, medication.Frequency);

        foreach (var scheduledTime in scheduledTimes)
        {
            MedicationSchedule newSchedule = new MedicationSchedule
            {
                MedicationID = medication.MedicationID,
                ScheduledTime = scheduledTime,
                Status = "Pending", // Default status
                CreatedAt = DateTime.Now
            };

            // Save newSchedule to the database
            // This will depend on your specific data access method, for example using EF Core:
            // context.MedicationSchedules.Add(newSchedule);
            // context.SaveChanges();
        }
    }
}
