using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace MATProject.Entities
{
	public class MedicationScheduleGenerator
	{
		public List<DateTime> GenerateScheduledTimes(DateTime startDate, DateTime endDate, string frequency)
		{
			List<DateTime> scheduledTimes = new List<DateTime>();

			// Define times for morning, midday, and evening
			TimeSpan morningTime = new TimeSpan(8, 0, 0);   // 8:00 AM
			TimeSpan middayTime = new TimeSpan(12, 0, 0);   // 12:00 PM
			TimeSpan eveningTime = new TimeSpan(18, 0, 0);  // 6:00 PM

			// Split the frequency string (format: "1-0-1")
			string[] parts = frequency.Split('-');
			if (parts.Length != 3)
			{
				throw new ArgumentException("Invalid frequency format. Expected '1-0-1'.");
			}

			bool morningDose = parts[0] == "1";
			bool middayDose = parts[1] == "1";
			bool eveningDose = parts[2] == "1";

			// Iterate through each day between startDate and endDate
			for (DateTime date = startDate; date <= endDate; date = date.AddDays(1))
			{
				if (morningDose)
				{
					// Add morning scheduled time
					scheduledTimes.Add(date.Date + morningTime);
				}
				if (middayDose)
				{
					// Add midday scheduled time
					scheduledTimes.Add(date.Date + middayTime);
				}
				if (eveningDose)
				{
					// Add evening scheduled time
					scheduledTimes.Add(date.Date + eveningTime);
				}
			}

			return scheduledTimes;
		}
	}
}
